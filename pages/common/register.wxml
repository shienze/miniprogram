<!--pages/common/register.wxml-->
<view class="container">
  <view class="form-container">
    <text class="title">注册</text>
    
    <!-- 角色选择 -->
    <view class="role-section">
      <text class="section-title">选择您的角色</text>
      <radio-group class="role-group" bindchange="handleRoleChange">
        <label class="role-item">
          <radio value="user" checked="{{role === 'user'}}" /> 学生/求职者
        </label>
        <label class="role-item">
          <radio value="enterprise" checked="{{role === 'enterprise'}}" /> 企业/机构
        </label>
      </radio-group>
    </view>
    
    <!-- 公共字段：手机号和验证码 -->
    <input class="input" placeholder="请输入手机号" bindinput="inputPhone" value="{{phone}}" />
    <view class="code-row">
      <input class="input code-input" placeholder="验证码" bindinput="inputCode" value="{{code}}" />
      <button class="code-btn" bindtap="sendCode" disabled="{{countdown > 0}}">{{ countdown > 0 ? countdown + 's' : '获取验证码' }}</button>
    </view>
    
    <!-- 学生角色字段 -->
    <block wx:if="{{role === 'user'}}">
      <input class="input" placeholder="姓名" bindinput="inputName" value="{{name}}" />
      <input class="input" placeholder="学校" bindinput="inputSchool" value="{{school}}" />
      <input class="input" placeholder="专业" bindinput="inputMajor" value="{{major}}" />
      <input class="input" placeholder="年级（如大三）" bindinput="inputGrade" value="{{grade}}" />
    </block>
    
    <!-- 企业角色字段 -->
    <block wx:if="{{role === 'enterprise'}}">
      <input class="input" placeholder="公司名称" bindinput="inputCompany" value="{{company}}" />
      <input class="input" placeholder="联系人姓名" bindinput="inputContact" value="{{contact}}" />
      <view class="upload-section">
        <text class="section-title">上传营业执照（jpg/png）</text>
        <button class="upload-btn" bindtap="uploadLicense">选择图片</button>
        <image wx:if="{{licensePath}}" class="preview" src="{{licensePath}}" mode="aspectFit" />
        <text wx:if="{{licensePath}}" class="upload-status">已选择：{{licenseName}}</text>
      </view>
    </block>
    
    <button class="submit-btn" bindtap="submitRegister">注册</button>
    
    <!-- 登录链接 -->
    <text class="login-link" bindtap="toLogin">已有账号？立即登录</text>
  </view>
  
  <!-- 加载动画 -->
  <loading hidden="{{!loading}}">注册中...</loading>
</view>