<!-- pages/user/intern-match.wxml -->
<view class="container">

<!-- 轮播banner -->
<swiper class="banner" indicator-dots="true" autoplay="true" interval="3000" duration="500">
  <swiper-item wx:for="{{banners}}" wx:key="index">
    <image src="{{item.url}}" mode="aspectFill" />
  </swiper-item>
</swiper>

<!-- 搜索栏 -->
<view class="search-bar">
  <input class="search-input" placeholder="搜索实习/公司" bindinput="inputSearch" value="{{searchKeyword}}" />
  <button class="search-btn" bindtap="doSearch">搜索</button>
</view>

<!-- 筛选 -->
<view class="filter-bar">
  <picker bindchange="changeLocation" range="{{locationOptions}}" value="{{locationIndex}}">
    <view class="filter-item">地点: {{locationOptions[locationIndex]}}</view>
  </picker>

  <picker bindchange="changeMajorCategory" range="{{majorCategoryOptions}}" value="{{majorCategoryIndex}}">
    <view class="filter-item">专业大类: {{majorCategoryOptions[majorCategoryIndex]}}</view>
  </picker>

  <button class="filter-btn" bindtap="applyFilter">应用筛选</button>
</view>

<!-- 实习职位列表 -->
<view class="job-section">
  <text class="section-title">实习推荐</text>

  <scroll-view class="job-list" scroll-y="true"
    bindscrolltolower="loadMore"
    enable-pull-down-refresh="true"
    bindpulldownrefresh="onPullDownRefresh">

    <view class="job-item"
          wx:for="{{displayJobs}}"
          wx:key="_id"
          bindtap="toJobDetail"
          data-id="{{item._id}}">

      <view class="job-title">{{item.title}}</view>

      <view class="job-info">
        <text>公司: {{item.enterpriseInfo.name}}</text>
        <text>薪资: {{item.salary}}</text>
        <text>地点: {{item.location.city}} {{item.location.district}}</text>
      </view>

      <view class="job-type">职位类型: {{item.jobType}}</view>
      <view class="cert-requirements">证书要求: {{item.certificates.join(', ')}}</view>

      <text class="major-requirements">
        专业要求: {{item.majorRequirements.category}} - {{item.majorRequirements.name}}
      </text>
    </view>

    <view wx:if="{{loadingMore}}" class="loading">加载中...</view>
  </scroll-view>
</view>
</view>
