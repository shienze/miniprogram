<!--pages/user/community.wxml-->
<view class="container">
  <!-- 搜索栏 -->
  <view class="search-bar">
    <input class="search-input" placeholder="搜索帖子/话题" bindinput="inputSearch" value="{{searchKeyword}}" />
    <button class="search-btn" bindtap="doSearch">搜索</button>
  </view>
  
  <!-- 帖子列表 -->
  <scroll-view class="post-list" scroll-y="true" bindscrolltolower="loadMore" enable-pull-down-refresh="true" bindpulldownrefresh="onPullDownRefresh">
    <view class="post-item" wx:for="{{posts}}" wx:key="id" bindtap="toPostDetail" data-id="{{item.id}}">
      <view class="post-header">
        <image class="author-avatar" src="{{item.authorAvatar || '/images/default-avatar.png'}}" mode="aspectFill" />
        <view class="author-info">
          <text class="author-name">{{item.author}}</text>
          <text class="post-time">{{item.time}}</text>
        </view>
      </view>
      <text class="post-title">{{item.title}}</text>
      <text class="post-preview">{{item.preview}}</text>
      <view class="post-tags">
        <text class="tag" wx:for="{{item.tags}}" wx:key="index">{{item}}</text>
      </view>
      <view class="post-actions">
        <text class="action">点赞 {{item.likes}}</text>
        <text class="action">评论 {{item.comments}}</text>
      </view>
    </view>
    <view wx:if="{{loadingMore}}" class="loading">加载中...</view>
    <view wx:if="{{posts.length === 0 && !loadingMore}}" class="empty">暂无帖子</view>
  </scroll-view>
  
  <!-- 悬浮发布按钮 -->
  <button class="fab" bindtap="toCreatePost">+</button>
</view>